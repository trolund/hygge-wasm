fun makeCounter(): () -> int = {
    let mutable x: int = 0;
    fun () -> {
        x <- x + 1 // x is captured from the surrounding scope
    }
};

let c1: () -> int = makeCounter();
let c2: () -> int = makeCounter();
assert(c1() = 1);
assert(c1() = 2);
assert(c1() = 3);
assert(c1() = 4);
assert(c2() = 1)